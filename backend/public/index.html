<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="platform_title">Jamoatchilik Qurilish - Гражданский Контроль</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">

</head>
<body class="antialiased">

    <header class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-gray-200/80">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 h-16 flex justify-between items-center">
            <a href="#" onclick="showSection('landing-section', true); return false;" class="text-xl font-semibold text-gray-800 hover:text-blue-600 transition duration-150 ease-in-out" data-lang-key="platform_name">
                Jamoatchilik Qurilish
            </a>

            <div class="hidden md:flex space-x-6 items-center">
                <button onclick="showSection('landing-section', true)" class="tab text-sm" data-section="landing-section" data-lang-key="nav_home">Главная</button>
                <button onclick="showSection('map-section', true)" class="tab text-sm" data-section="map-section" data-lang-key="nav_map">Карта</button>
                <button onclick="showSection('projects-section', true)" class="tab text-sm" data-section="projects-section" data-lang-key="nav_projects">Проекты</button>
                <button onclick="showSection('contractors-section', true)" class="tab text-sm" data-section="contractors-section" data-lang-key="nav_contractors">Подрядчики</button>
                <button onclick="showSection('citizen-reports-public-section', true)" class="tab text-sm" data-section="citizen-reports-public-section" data-lang-key="nav_public_reports">Отчеты</button>
                <button onclick="showSection('report-section', true)" class="tab text-sm" data-section="report-section" data-lang-key="nav_report">Сообщить</button>
            </div>

            <div class="flex items-center space-x-3">
                <button onclick="showLoginForm()" class="btn btn-secondary btn-sm py-1.5 px-4 text-xs" data-lang-key="nav_login">Вход</button>
                <button onclick="startRegistrationProcess()" class="btn btn-primary btn-sm py-1.5 px-4 text-xs" data-lang-key="nav_register">Регистрация</button>
                <div class="lang-dropdown ml-2">
                    <button class="lang-button inline-flex items-center justify-center text-sm font-medium">
                         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 mr-1.5"><path d="M7.75 2.75a.75.75 0 00-1.5 0v1.258a32.987 32.987 0 00-3.599.278.75.75 0 10.198 1.487A31.545 31.545 0 018.7 5.546.75.75 0 009 6.75v1.476c0 .698-.373 1.33-.955 1.688a18.69 18.69 0 00-1.966.83.75.75 0 10.593 1.331 17.192 17.192 0 012.328-.853.75.75 0 00.701-.031 17.194 17.194 0 012.328.853.75.75 0 10.593-1.331 18.683 18.683 0 00-1.965-.83C11.373 9.555 11 8.917 11 8.226V6.75a.75.75 0 00-.3-.606A31.545 31.545 0 0114.802 5.77a.75.75 0 10.198-1.487 32.987 32.987 0 00-3.599-.278V2.75z" /><path fill-rule="evenodd" d="M13 10.5a2.75 2.75 0 10-5.5 0 2.75 2.75 0 005.5 0zM10 12a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" /><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm0 1.5a9.5 9.5 0 100-19 9.5 9.5 0 000 19z" /></svg>
                        <span id="current-lang">RU</span>
                    </button>
                    <div class="lang-dropdown-content">
                        <button onclick="setLanguage('ru')">Русский (RU)</button>
                        <button onclick="setLanguage('en')">English (EN)</button>
                        <button onclick="setLanguage('uz')">O'zbekcha (UZ)</button>
                    </div>
                </div>
                <button id="mobile-menu-button" class="ml-1 md:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-200">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button onclick="showSection('landing-section', true); closeMobileMenu();" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-section="landing-section" data-lang-key="nav_home">Главная</button>
                <button onclick="showSection('map-section', true); closeMobileMenu();" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-section="map-section" data-lang-key="nav_map">Карта</button>
                <button onclick="showSection('projects-section', true); closeMobileMenu();" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-section="projects-section" data-lang-key="nav_projects">Проекты</button>
                <button onclick="showSection('contractors-section', true); closeMobileMenu();" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-section="contractors-section" data-lang-key="nav_contractors">Подрядчики</button>
                <button onclick="showSection('citizen-reports-public-section', true); closeMobileMenu();" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-section="citizen-reports-public-section" data-lang-key="nav_public_reports">Отчеты</button>
                <button onclick="showSection('report-section', true); closeMobileMenu();" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-section="report-section" data-lang-key="nav_report">Сообщить</button>
                <div class="border-t border-gray-100 pt-3 mt-2 space-y-1">
                     <button onclick="showLoginForm(); closeMobileMenu();" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-lang-key="nav_login">Вход</button>
                    <button onclick="startRegistrationProcess(); closeMobileMenu();" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50" data-lang-key="nav_register">Регистрация</button>
                     </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 pt-4 pb-8">

        <section id="landing-section" class="content-section">
            <div class="landing-hero rounded-xl mb-12 md:mb-16"><h1 data-lang-key="landing_title">Контролируйте строительство. Вместе.</h1><p data-lang-key="landing_subtitle">Платформа "Jamoatchilik Qurilish" — ваш инструмент для прозрачного мониторинга государственных инфраструктурных проектов в Узбекистане. Узнавайте бюджеты, следите за сроками и влияйте на качество.</p><div class="flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4"><button onclick="showSection('projects-section', true)" class="btn btn-primary w-full sm:w-auto"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="icon w-5 h-5"><path d="M3.5 2.75a.75.75 0 00-1.5 0v14.5a.75.75 0 001.5 0v-1.668A3.75 3.75 0 016.25 12h7.5a3.75 3.75 0 012.75 3.082V17.25a.75.75 0 001.5 0V2.75a.75.75 0 00-1.5 0v1.668A3.75 3.75 0 0113.75 8h-7.5a3.75 3.75 0 01-2.75-3.082V2.75z"></path></svg><span data-lang-key="landing_cta_projects">Изучить проекты</span></button><button onclick="showSection('report-section', true)" class="btn btn-secondary w-full sm:w-auto"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="icon w-5 h-5"><path fill-rule="evenodd" d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_cta_report">Сообщить о проблеме</span></button></div></div>
            <div class="landing-section"><h2 data-lang-key="landing_how_it_works_title">Как это работает? Просто.</h2><div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div class="step-card"><span class="step-number">1</span><h3 data-lang-key="landing_how_step1_title">Находите проекты</h3><p data-lang-key="landing_how_step1_desc">Используйте интерактивную карту или список для поиска строящихся или завершенных объектов рядом с вами.</p></div><div class="step-card"><span class="step-number">2</span><h3 data-lang-key="landing_how_step2_title">Изучайте детали</h3><p data-lang-key="landing_how_step2_desc">Получите доступ к информации о бюджете, сроках, подрядчике и официальной документации по каждому проекту.</p></div><div class="step-card"><span class="step-number">3</span><h3 data-lang-key="landing_how_step3_title">Делитесь наблюдениями</h3><p data-lang-key="landing_how_step3_desc">Заметили проблему? Отправьте фото или комментарий с геолокацией прямо через платформу.</p></div></div></div>
            <div class="landing-section bg-gray-50 rounded-xl"><h2 data-lang-key="landing_features_title">Ключевые возможности</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"><div class="feature-card bg-white"><img src="https://www.google.com/url?sa=i&url=https%3A%2F%2Fironcon-lab.ru%2Farticles%2Fmetody-ispytania-betona%2F&psig=AOvVaw2xw2QLJZApI48VaUNqkYGK&ust=1746366513823000&source=images&cd=vfe&opi=89978449&ved=0CBQQjRxqFwoTCJCIyq-4h40DFQAAAAAdAAAAABAE" class="icon-xl mx-auto" alt="Transparency Icon"><h3 data-lang-key="landing_feature1_title">Полная прозрачность</h3><p data-lang-key="landing_feature1_desc">Вся информация о бюджетах, сроках, подрядчиках и документации в одном месте.</p></div><div class="feature-card bg-white">
                <img src="https://www.google.com/url?sa=i&url=https%3A%2F%2Fironcon-lab.ru%2Farticles%2Fmetody-ispytania-betona%2F&psig=AOvVaw2xw2QLJZApI48VaUNqkYGK&ust=1746366513823000&source=images&cd=vfe&opi=89978449&ved=0CBQQjRxqFwoTCJCIyq-4h40DFQAAAAAdAAAAABAE" class="icon-xl mx-auto" alt="Monitoring Icon"><h3 data-lang-key="landing_feature2_title">Гражданский мониторинг</h3><p data-lang-key="landing_feature2_desc">Возможность для каждого гражданина сообщать о реальном состоянии объектов.</p></div><div class="feature-card bg-white">
                    <img src="https://www.google.com/url?sa=i&url=https%3A%2F%2Fironcon-lab.ru%2Farticles%2Fmetody-ispytania-betona%2F&psig=AOvVaw2xw2QLJZApI48VaUNqkYGK&ust=1746366513823000&source=images&cd=vfe&opi=89978449&ved=0CBQQjRxqFwoTCJCIyq-4h40DFQAAAAAdAAAAABAE" class="icon-xl mx-auto" alt="AI Analysis Icon"><h3 data-lang-key="landing_feature3_title">AI-анализ отчетов</h3><p data-lang-key="landing_feature3_desc">Система анализирует данные от граждан и сравнивает их с официальными отчетами для выявления расхождений.</p></div><div class="feature-card bg-white">
                        <img src="https://www.google.com/url?sa=i&url=https%3A%2F%2Fironcon-lab.ru%2Farticles%2Fmetody-ispytania-betona%2F&psig=AOvVaw2xw2QLJZApI48VaUNqkYGK&ust=1746366513823000&source=images&cd=vfe&opi=89978449&ved=0CBQQjRxqFwoTCJCIyq-4h40DFQAAAAAdAAAAABAE" class="icon-xl mx-auto" alt="Rating Icon"><h3 data-lang-key="landing_feature4_title">Рейтинг подрядчиков</h3><p data-lang-key="landing_feature4_desc">Публичный рейтинг компаний, основанный на качестве работ и отзывах граждан.</p></div></div></div>
            <div class="landing-section"><h2 data-lang-key="landing_benefits_title">Польза для всех</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center"><div><h3 class="text-xl font-semibold mb-4" data-lang-key="landing_benefits_citizens_title">Для Граждан</h3><ul class="space-y-3 text-gray-600"><li class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_benefits_citizens1">Реальный контроль за расходованием бюджетных средств.</span></li><li class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_benefits_citizens2">Возможность влиять на качество инфраструктуры в своем городе.</span></li><li class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_benefits_citizens3">Удобный инструмент для обратной связи и сообщений о проблемах.</span></li></ul></div><div class="img-placeholder h-64 md:h-80"><img src="https://via.placeholder.com/400x300/e5e5e7/8a8a8e?text=Citizen+Feedback" alt="Гражданин использует платформу" loading="lazy"></div><div class="img-placeholder h-64 md:h-80 order-last md:order-first"><img src="https://via.placeholder.com/400x300/e5e5e7/8a8a8e?text=Gov+Analysis" alt="Анализ данных для государства" loading="lazy"></div><div class="order-first md:order-last"><h3 class="text-xl font-semibold mb-4" data-lang-key="landing_benefits_gov_title">Для Государства</h3><ul class="space-y-3 text-gray-600"><li class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_benefits_gov1">Повышение эффективности расходования бюджетных средств.</span></li><li class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_benefits_gov2">Своевременное выявление проблемных объектов и недобросовестных подрядчиков.</span></li><li class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_benefits_gov3">Улучшение качества инфраструктуры и повышение доверия граждан.</span></li></ul></div></div></div>
            <div class="text-center py-12"><h2 class="text-2xl md:text-3xl font-bold mb-4" data-lang-key="landing_final_cta_title">Присоединяйтесь к контролю!</h2><p class="text-gray-600 mb-8 max-w-xl mx-auto" data-lang-key="landing_final_cta_desc">Начните использовать платформу уже сегодня. Изучайте проекты в вашем районе или сообщите о проблеме, которую вы заметили.</p><div class="flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4"><button onclick="showSection('map-section', true)" class="btn btn-primary w-full sm:w-auto"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="icon w-5 h-5"><path fill-rule="evenodd" d="M9.69 18.933l.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 00.281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 103 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 002.274 1.765 11.842 11.842 0 00.757.433c.1.049.194.096.28.14l.018.008.006.003zM10 11.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_final_cta_map">Посмотреть карту</span></button><button onclick="showSection('report-section', true)" class="btn btn-secondary w-full sm:w-auto"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="icon w-5 h-5"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A.75.75 0 0010 13.5h.253a.25.25 0 01.244.304l-.459 2.066A.75.75 0 0010 16.5h.75a.75.75 0 000-1.5h-.528a.25.25 0 01-.244-.304l.459-2.066A.75.75 0 0011 10.5h-.75a.75.75 0 000-1.5H9z" clip-rule="evenodd"></path></svg><span data-lang-key="landing_final_cta_report">Сообщить о проблеме</span></button></div></div>
        </section>

        <section id="map-section" class="content-section hidden">
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl md:text-3xl font-semibold mb-6 text-gray-800" data-lang-key="map_title">Интерактивная карта проектов</h2>
                <div id="map" class="border border-gray-200 z-0"></div>
                <p class="mt-4 text-sm text-gray-600" data-lang-key="map_hint">Нажмите на маркер для просмотра информации о проекте.</p>
            </div>
        </section>

        <section id="projects-section" class="content-section hidden">
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl md:text-3xl font-semibold mb-6 text-gray-800" data-lang-key="projects_title">Список Инфраструктурных Проектов</h2>
                <div class="mb-6 relative">
                    <input type="text" id="project-search" data-lang-placeholder-key="projects_search_placeholder" placeholder="Поиск по названию или подрядчику..." class="w-full p-3 pl-10 text-sm">
                    <div class="absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-400"> <svg class="w-5 h-5 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg> </div>
                </div>
                <div id="project-list" class="space-y-4">
                    <p class="text-gray-500 italic p-4" data-lang-key="projects_not_found">Загрузка проектов...</p>
                </div>
            </div>
        </section>

        <section id="contractors-section" class="content-section hidden">
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl md:text-3xl font-semibold mb-6 text-gray-800" data-lang-key="contractors_title">Рейтинг Подрядчиков</h2>
                <div id="contractor-list" class="space-y-4">
                     <p class="text-gray-500 italic p-4" data-lang-key="contractor_no_projects">Загрузка подрядчиков...</p>
                </div>
            </div>
        </section>

        <section id="citizen-reports-public-section" class="content-section hidden">
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <div class="flex flex-wrap justify-between items-center mb-6 gap-4">
                    <h2 id="public-reports-title" class="text-2xl md:text-3xl font-semibold text-gray-800" data-lang-key="public_reports_title">Публичные отчеты граждан</h2>
                    <button id="show-all-reports-button" class="btn btn-secondary hidden text-sm py-2 px-4" onclick="displayPublicReports(null)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="icon w-4 h-4"><path fill-rule="evenodd" d="M4.5 2a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5h-7ZM5 13V3h6v10H5Z" clip-rule="evenodd" /><path d="M6.854 4.146a.5.5 0 0 1 0 .708L5.707 6l1.147 1.146a.5.5 0 0 1-.708.708L4.646 6.354a.5.5 0 0 1 0-.708L6.146 4.146a.5.5 0 0 1 .708 0Zm2.292 0a.5.5 0 0 0 0 .708L10.293 6l-1.147 1.146a.5.5 0 0 0 .708.708l1.5-1.5a.5.5 0 0 0 0-.708l-1.5-1.5a.5.5 0 0 0-.708 0Z"/></svg>
                        <span data-lang-key="public_reports_show_all">Показать все отчеты</span>
                    </button>
                </div>
                <div id="public-reports-list" class="space-y-4">
                     <p class="text-gray-500 italic p-4" data-lang-key="report_no_reports">Загрузка отчетов...</p>
                </div>
            </div>
        </section>

        <section id="report-section" class="content-section hidden">
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl md:text-3xl font-semibold mb-2 text-gray-800" data-lang-key="report_title">Сообщить о состоянии объекта</h2>
                <p class="text-gray-600 mb-6 text-sm" data-lang-key="report_subtitle">Заметили проблему со строительством или состоянием объекта? Расскажите нам!</p>
                <form id="report-form" class="space-y-5" novalidate>
                    <div><label for="report-project" data-lang-key="report_select_project">Выберите проект:</label><select id="report-project" name="project" required><option value="" data-lang-key="report_select_placeholder" disabled selected>-- Выберите проект --</option></select></div>
                    <div><label for="report-comment" data-lang-key="report_comment_label">Ваш комментарий:</label><textarea id="report-comment" name="comment" rows="4" data-lang-placeholder-key="report_comment_placeholder" placeholder="Опишите проблему..." required></textarea></div>
                    <div><label for="report-photo" data-lang-key="report_attach_photo">Прикрепить фото:</label><input type="file" id="report-photo" name="report-photo" accept="image/jpeg, image/png, image/gif, image/webp"><p class="text-xs text-gray-500 mt-1" data-lang-key="report_attach_hint">Допустимые форматы: JPG, PNG, GIF, WEBP (макс. 10MB).</p></div>
                    <div><label data-lang-key="report_geolocation_label">Геолокация:</label><p id="geolocation-status" class="text-sm text-gray-600" data-lang-key="report_geolocation_fetching">Получение координат...</p><input type="hidden" id="report-latitude" name="latitude"><input type="hidden" id="report-longitude" name="longitude"></div>
                    <button type="submit" class="btn btn-primary w-full py-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="icon w-5 h-5"><path d="M3.105 3.105a1.5 1.5 0 012.122 0l11.06 11.061a1.5 1.5 0 01-2.122 2.121L3.105 5.227a1.5 1.5 0 010-2.122z"></path><path d="M3.474 15.026a1.5 1.5 0 010-2.121L14.534 1.84a1.5 1.5 0 012.121 2.122L5.596 15.026a1.5 1.5 0 01-2.122 0z"></path></svg><span data-lang-key="report_submit_button">Отправить отчет</span></button>
                </form>
                <div id="citizen-reports" class="mt-10 border-t border-gray-200 pt-6"><h3 class="text-xl font-semibold mb-4 text-gray-700" data-lang-key="report_latest_reports">Последние отчеты граждан:</h3><div id="reports-list" class="space-y-4 max-h-96 overflow-y-auto pr-2"><p class="text-gray-500 italic text-sm" data-lang-key="report_no_reports">Загрузка отчетов...</p></div></div>
            </div>
        </section>

        <section id="quiz-section" class="content-section hidden">
        </section>

        <section id="registration-info-section" class="content-section hidden">
            <div class="modal-section text-center"> <h2 class="text-2xl md:text-3xl font-semibold mb-6 text-gray-800" data-lang-key="reginfo_title">Шаг 1: Важная информация</h2>
        
                <figure class="mb-4">
                    <img src="https://i.ytimg.com/vi/72j2BzGorMs/maxresdefault.jpg"
                         alt="Вы должны купить какой прибор и тд"
                         class="max-w-full h-auto mx-auto rounded-lg shadow-md border border-gray-200">
                         </figure>
        
                <p class="text-gray-700 mb-8 text-base leading-relaxed" data-lang-key="reginfo_explanation">
                    Это пример объяснения под фотографией. Здесь может быть важная информация о правилах безопасности на стройке, о том, как правильно делать отчеты для платформы, или любая другая ключевая информация, с которой пользователь должен ознакомиться перед регистрацией. Убедитесь, что текст понятен и связан с изображением.
                </p>
        
                <button onclick="proceedToRegistration()" class="btn btn-primary w-full sm:w-auto py-3" data-lang-key="reginfo_continue_button">
                    Понятно, продолжить регистрацию
                </button>
            </div>
        </section>

        <section id="quiz-section" class="content-section hidden">
            <div class="modal-section"> <h2 class="text-2xl md:text-3xl font-semibold mb-6 text-gray-800 text-center" data-lang-key="quiz_title">Проверка знаний</h2>
                <p class="text-gray-600 mb-6 text-sm text-center" data-lang-key="quiz_intro">Прежде чем вы сможете зарегистрироваться, пожалуйста, ответьте на несколько вопросов о платформе.</p>
                <form id="quiz-form" class="space-y-6">
                    <div id="quiz-questions-container">
                        <p class="text-center text-gray-500" data-lang-key="quiz_loading">Загрузка вопросов...</p>
                    </div>
                    <button type="submit" class="btn btn-primary w-full py-3" data-lang-key="quiz_submit_button">Отправить ответы</button>
                </form>
            </div>
        </section>

        <section id="register-section" class="content-section hidden">
            <div class="modal-section">
                <h2 class="text-2xl md:text-3xl font-semibold mb-6 text-gray-800 text-center" data-lang-key="register_title">Регистрация</h2>
                <p class="text-gray-600 mb-6 text-sm text-center" data-lang-key="register_intro">Тест пройден! Теперь вы можете создать аккаунт.</p>
                <form id="register-form" class="space-y-5" novalidate>
                    <div>
                        <label for="register-email" data-lang-key="register_email_label">Email:</label>
                        <input type="email" id="register-email" name="email" required data-lang-placeholder-key="register_email_placeholder" placeholder="Введите ваш email">
                    </div>
                     <div>
                        <label for="register-password" data-lang-key="register_password_label">Пароль:</label>
                        <input type="password" id="register-password" name="password" required data-lang-placeholder-key="register_password_placeholder" placeholder="Придумайте пароль">
                    </div>
                     <div>
                        <label for="register-confirm-password" data-lang-key="register_confirm_password_label">Подтвердите пароль:</label>
                        <input type="password" id="register-confirm-password" name="confirmPassword" required data-lang-placeholder-key="register_confirm_password_placeholder" placeholder="Повторите пароль">
                    </div>
                    <button type="submit" class="btn btn-primary w-full py-3" data-lang-key="register_submit_button">Зарегистрироваться</button>
                </form>
            </div>
        </section>

        <section id="login-section" class="content-section hidden">
            <div class="modal-section">
                <h2 class="text-2xl md:text-3xl font-semibold mb-6 text-gray-800 text-center" data-lang-key="login_title">Вход</h2>
                <p class="text-gray-600 mb-6 text-sm text-center" data-lang-key="login_intro">Введите ваши данные для входа.</p>
                <form id="login-form" class="space-y-5" novalidate>
                    <div>
                        <label for="login-email" data-lang-key="login_email_label">Email:</label>
                        <input type="email" id="login-email" name="email" required data-lang-placeholder-key="login_email_placeholder" placeholder="Введите ваш email">
                    </div>
                    <div>
                        <label for="login-password" data-lang-key="login_password_label">Пароль:</label>
                        <input type="password" id="login-password" name="password" required data-lang-placeholder-key="login_password_placeholder" placeholder="Введите ваш пароль">
                    </div>
                    <button type="submit" class="btn btn-primary w-full py-3" data-lang-key="login_submit_button">Войти</button>
                     <div class="text-center mt-4">
                        <a href="#" onclick="alert('Функция восстановления пароля еще не реализована'); return false;" class="text-sm text-blue-600 hover:underline" data-lang-key="login_forgot_password">Забыли пароль?</a>
                    </div>
                </form>
                </div>
       </section>

    </main>

    <footer>
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; <span id="footer-year">2025</span> <span data-lang-key="platform_name_footer">Jamoatchilik Qurilish</span>. <span data-lang-key="footer_rights">Все права защищены.</span></p>
        </div>
    </footer>

    <div id="message-box" class="message-box"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""></script>

    <script src="script.js"></script>

</body>
</html>